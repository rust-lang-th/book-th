## Hello, World!

ตอนนี้คุณก็ได้ติดตั้ง Rust เรียบร้อยแล้ว มาเลองเขียนโปรแกรมอันแรกกันเถอะ ซึ่งโดยตามปกติแล้วเมื่อเรียนรู้ภาษาโปรแกรมใหม่ โปรแกรมแรกก็มักจะเป็นโปรแกรมที่แสดงข้อความ `Hello, world!` บนหน้าจอ และเราจะมาทำสิ่งนั้นกัน

> หมายเหตุ: หนังสือนี้จะอนุมานว่าคุณมีความรู้เบื้องต้นเกี่ยวกับ command line
> และ Rust ก็ไม่ได้มีเครื่องมือการพัฒนาที่ตายตัว
> ถ้าคุณต้องการใช้ integrated development environment (IDE) แทนที่จะเป็น
> command line ก็สามารถใช้ IDE ที่คุณชื่นชอบได้ตามสบาย มี IDEs หลายตัว
> ที่สนับสนุนการใช้ภาษา Rust; สามารถตวรสอบคู่มือเกี่ยวกับ IDE’s documentation เพื่อดูข้อมูลเพิ่มเติม
> โดยในปัจจุบันทีม Rust ก็ได้ให้ความสำคัญกับการสนับสนุนภาษา Rust ใน IDE ต่างๆ
> และก็มีความคืบหน้าในส่วนนี้เป็นอย่างมาก

### การสร้างไดเรทอรีของโปรเจค

คุณจะได้เริ่มต้นโดยการสร้างไดเรคทอรเพื่อจัดเก็บโค้ดภาษา Rust
โดยจริงๆแล้วมันก็ไม่สำคัญว่าโค้ดมันถูกเก็บอยู่ที่ใด
แต่สำหรับแบบฝึกหัดและโปรเจกต์ในหนังสือเล่มนี้
เราแนะนำให้สร้างไดเรคทอรี *projects*
ในโฮมไดเร็กทอรีของคุณและเก็บโปรเจ็กต์ทั้งหมดไว้ที่นั่น 

เปิด terminal และพิมพ์คำสั่งเหล่านี้ลงไปเพื่อที่จะสร้างไดเรคทอรีของ *projects* 
และไดเรคทอรีสำหรับโปรเจกต์ “Hello, world!” ที่อยู่ในไดเรคทอรีของ *projects*

สำหรับ Linux, macOS และ PowerShell บน Windows ให้พิมพ์คำสั่งนี้:

```console
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```

สำหรับ Windows CMD, ให้พิมพ์คำสั่งนี้:

```cmd
> mkdir "%USERPROFILE%\projects"
> cd /d "%USERPROFILE%\projects"
> mkdir hello_world
> cd hello_world
```

### เขียนและรันโปรแกรม Rust กัน

ต่อมา ให้สร้างซอร์สไฟล์และตั้งชื่อว่า *main.rs* โดยไฟล์ Rust จะมีนามสกุลไฟล์เป็น
*.rs* และถ้าคุณใช้คำหนึ่งคำตั้้งเป็นชื่อไฟล์
ใช้เครื่องหมาย underscore(_) ระหว่างคำเหล่านั้น เช่น *hello_world.rs* แทนที่จะเป็น
*helloworld.rs*.

แล้วก็เปิดไฟล์ *main.rs* ที่เพิ่งสร้างและใส่โค้ดจากตัวอย่างที่ 1-1 ลงไป

<span class="filename">Filename: main.rs</span>

```rust
fn main() {
    println!("Hello, world!");
}
```

<span class="caption">ตัวอย่างที่ 1-1: โปรแกรมที่แสดงผล `Hello, world!` บนหน้าจอ</span>

บันทึกไฟล์และกลับไปยังหน้าจอ terminal บน Linux หรือ macOS ใส่คำสั่งเหล่านี้เพื่อคอมไพล์และรันไฟล์:

```console
$ rustc main.rs
$ ./main
Hello, world!
```

บน Windows ให้พิมพ์คำสั่งนี้ `.\main.exe` ที่ไม่ใช่คำสั่งนี้ `./main`:

```powershell
> rustc main.rs
> .\main.exe
Hello, world!
```

ไม่ว่าคุณจะใช้ระบบปฏิบัติการอะไร สตริง `Hello, world!` ควรจะแสดงผลออกมาบน
terminal ถ้าไม่มีผลลัพธ์แสดงออกมา ให้กลับไปที่
[“Troubleshooting”][troubleshooting]<!-- ignore --> ซึ่งเป็นส่วนที่เกี่ยวกับการติดตั้ง เพื่อหาความช่วยเหลือ

และถ้า `Hello, world!` แสดงผล ยินดีด้วย!
คุณได้เขียนโปรแกรมภาษา Rust ขึ้นมาอันหนึ่งแล้ว
และตอนนี้คุณก็ได้เป็นโปรแกรมเมอร์ภาษา Rust เรียบร้อยแล้ว!

### โครงสร้างโปรแกรมภาษา Rust

มาดูในรายละเอียดกันว่าเกิดอะไรขึ้นในโปรแกรม “Hello, world!” 
โดยในส่วนแรกคือ:

```rust
fn main() {

}
```

โดยบรรทัดเหล่านี้คือการสร้างฟังก์ชันใน Rust โดยฟังก์ชัน `main` เป็นฟังก์ชันพิเศษ
โดยจะเป็นฟังก์ชันที่จะรันเป็นอันดับแรกสุดเมื่อโปรแกรมทำงาน
โดยบรรทัดแรกคือการสร้างฟังก์ชันชื่อ `main` ที่ไม่มีพารามิเตอร์และการคืนค่า
และถ้ามีพารามิเตอร์ พารามิเตอร์จะถูกใส่ในเครื่องหมายวงเล็บ `()`

โดยเนื้อหาของฟังก์ชันจะอยู่ในวงเล็บปีกกา `{}`. Rust
โดย Rust ต้องการเครื่องหมายนี้เพื่อบอกขอบเขตของฟังก์ชัน
และจะดียิ่งขึ้น หากวางวงเล็บปีกกาเปิดที่บรรทัดเดียวกันกับบรรทัดที่เริ่มสร้างฟังก์ชัน 
และเว้นวรรคหนึ่งครั้งระหว่างอักขระก่อนหน้า

ถ้าคุณต้องการจัดรูปแบบโค้ดในโปรเจกต์ให้เป็นไปตามมาตรฐาน
คุณสามารถใช้ตัวจัดรูปแบบอัตโนมัติที่เรียกว่า `rustfmt` เพื่อใช้จัดรูปแบบโค้ด
โดย Rust ได้มีเครื่องมือนี้ ไว้ในตัวติดตั้งแบบธรรมดาอยู่แล้ว
เช่นเดียวกับ `rustc` ดังนั้นเครื่องมือนี้ก็ได้ถูกติดตั้งมาพร้อมกับ Rust เรียบร้อยแล้ว
ตรวจสอบคู่มือออนไลน์สำหรับรายละเอียดเพิ่มเติม 

ในฟังก์ชัน `main` ประกอบไปด้วยโค้ดเหล่านี้:

```rust
    println!("Hello, world!");
```

บรรทัดนี้คือการทำงานทั้งหมดของโปรแกรมนี้ โดยการแสดงผลข้อความลงบนหน้าจอ
โดยมีรายละเอียดหลักๆที่ต้องพิจารณา ดังนี้

อย่างแรกเลย การย่อหน้าใน Rust มาจากช่องว่าง 4 ช่อง ไม่ใช้ tab

อย่างที่สอง `println!` เป็นการเรียกมาโครของ Rust ซึ่งถ้าเป็นการเรียกฟังก์ชัน
จะเขียนเป็น `println` (ไม่มีเครื่องหมาย `!`) โดยเราจะพูดคุยกันเพิ่มเติมเกี่ยวกับมาโคร
ในบทที่ 19 สำหรับตอนนี้ คุณแค่รู้ว่าการมี `!`
หมายถึงการเรียกใช้มาโครแทนที่จะเป็นการเรียกฟังก์ชันปกติ

อย่างที่สาม คุณจะเห็นสตริง `"Hello, world!"` เราใช้สตริงเป็นอากิวเม้นต์ผ่านเข้าไปยัง
`println!` และสตริงก็ถูกแสดงผลบนหน้าจอ

อย่างที่สี่ เราจะจบบรรทัดด้วยเครื่องหมายเซมิโคลอน (`;`) 
ซึ่งเป็นสิ่งที่แสดงว่าเป็นการสิ้นสุดคำสั่งและพร้อมสำหรับคำสั่งถัดไป
โดยบรรทัดส่วนใหญ่ในโค้ดภาษา Rust มักจะจบด้วยเครื่องหมายเซมิโคลอน

### การคอมไพล์และการรันเป็นคนละขั้นตอนกัน

ถ้าคุณยังเป็นมือใหม่ในเรื่องการเขียนโปรแกรม มาเรียนรู้วิธีการในแต่ละขั้นตอนกันเถอะ

ก่อนที่จะรันโปรแกรม Rust คุณจะต้องคอมไพล์โดยใช้ Rust compiler
โดยพิมพ์คำสั่ง `rustc` แลตามด้วยชื่อไฟล์ ดังนี้:

```console
$ rustc main.rs
```

ถ้าคุณคุ้นเคยกับภาษา C หรือ C++ คุณจะสังเกตุเห็นว่ามันคล้ายกับ `gcc`
หรือ `clang` โดยเมื่อคอมไพล์สำเร็จ จะได้ผลลัพธ์เป็น binary executable

บน Linux, macOS และ PowerShell บน Windows, คุณจะเห็น executable
โดยการพิมพ์คำสั่ง `ls` ใน shell บน Linux และ macOS
คุณจะเห็นไฟล์สองไฟล์
และสำหรับ PowerShell บน Windows คุณจะเห็นไฟล์สามไฟล์ ที่มีชื่อเหมือนกัน

```console
$ ls
main  main.rs
```

สำหรับ CMD บน Windows ให้พิมพ์คำสั่งเหล่านี้:

```cmd
> dir /B %= the /B option says to only show the file names =%
main.exe
main.pdb
main.rs
```

นี่แสดงซอร์สโค้ดไฟล์ที่มีนามสกุล *.rs*, ไฟล์ปฏิบัติการ (executable file)
(*main.exe* บน Windows แต่ *main* บนแพลตฟอร์มที่เหลือ),
และเมื่อใช้ Windows จะมีไฟล์ที่ประกอบด้วยข้อมูลการดีบั๊กมีนามสุลไฟล์เป็น *.pdb*
จากจุดนี้, สามารถรันไฟล์ *main* หรือ *main.exe* ได้ดังนี้:

```console
$ ./main # or .\main.exe on Windows
```

ถ้า *main.rs* คือโปรแกรม “Hello, world!” บรรทัดนี้จะแสดงข้อความ `Hello,
world!` บน terminal ของคุณ

ถ้าคุณคุ้นเคยกับภาษาแบบไดนามิค เช่น Ruby, Python หรือ
JavaScript คุณอาจไม่คุ้นเคยกับการคอมไพล์และรันโปรแกรมแบบคนละขั้นตอนกัน
โดย Rust คือภาษาชนิด *ahead-of-time compiled* 
หมายความว่าคุณสามารถคอมไพล์โปรแกรมและแจกจ่ายไฟล์ executable ให้ใครก็ได้
และก็สามารถรันได้โดยไม่จำเป็นต้องติดตั้ง Rust เลย
แต่ถ้าคุณแจกจ่ายไฟล์ *.rb*, *.py* หรือ *.js* คุณอาจจำเป็นต้องติดตั้ง Ruby, Python หรือ JavaScript
แต่ว่าภาษาที่ยกตัวอย่างมานั้น ใช้แค่คำสั่งเดียวในการคอมไพล์และรันโปรแกรม
แต่ว่าการออกแบบภาษามักจะมีสิ่งที่ต้องแลกมาเสมอ

การคอมไพล์ด้วย `rustc` ก็เป็นสิ่งที่ดีสำหรับโปรแกรมแบบง่ายๆ
แต่ว่าเมื่อโปรเจกต์ใหญขึ้น คุณจะต้องจัดการการตั้งค่าและทำให้มันง่านในการแจกจ่ายโค้ด
ต่อไป, เราจะแนะนำคุณเกี่ยวกับ Cargo ซึ่งจะช่วยให้คุณเขียนโปรแกรม Rust ที่ใช้งานกันจริงๆได้

[troubleshooting]: ch01-01-installation.html#troubleshooting
