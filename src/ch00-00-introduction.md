# บทนำ

> หมายเหตุ: หนังสือนี้มีเนื้อหาเหมือนกันกับหนังสือ [The Rust Programming
> Language][nsprust] ซึ่งมีให้บริการในรูปแบบสิ่งพิมพ์และอีบุ๊คจาก [No Starch
> Press][nsp].

[nsprust]: https://nostarch.com/rust
[nsp]: https://nostarch.com/

ยินดีต้อนรับสู่ *The Rust Programming Language*, ซึ่งเป็นหนังสือเกี่ยวกับ Rust
ภาษาโปรแกรม Rust จะช่วยให้คุณเขียนซอฟต์แวร์ได้เร็วและน่าเชื่อถือมากขึ้น
การออกแบบภาษาแบบขั้นสูงและการควบคุมจนถึงระดับล่างเป็นสิ่งที่ยากมากในการออกแบบภาษาโปรแกรมมิ่ง Rust ได้ท้าทายความขัดแย้งนั้น โดยปรับสมดุลระหว่างประสิทธิภาพทางเทคนิกของภาษาและประสบการณ์ที่ยอดเยี่ยมของนักพัฒนา และ Rust ยังให้ตัวเลือกคุณในการควบคุมรายละเอียดระดับล่าง (เช่น การใช้หน่วยความจำ) โดยไม่มีความยุ่งยาก

## Rust เหมาะสำหรับใครบ้าง

Rust เหมาะสำหรับคนหลากหลายกลุ่มด้วยเหตุผลหลากหลายประการ มาดูบางกลุ่มที่มีความสำคัญกันเถอะ

### ทีมพัฒนา

Rust พิสูจน์แล้วว่าเป็นเครื่องมือที่มีประสิทธิภาพในการทำงานเป็นทีมใหญ่ที่ประกอบด้วยผู้ที่มีความรู้เกี่ยวกับการเขียนโปรแกรมเชิงระบบในหลากหลายระดับ โค้ดระดับต่ำมักจะเป็นโค้ดที่มีความผิดพลาด (บั๊ก(Bug)) บ่อย ซึ่งในภาษาอื่นๆ ในการหาบั๊กเหล่านั้น จะต้องทำการทดสอบโดยใช้ความละเอียดรอบคอบโดยผู้พัฒนาที่มีประสมการณ์สูง ในภาษา Rust, คอมไพเลอร์ทำหน้าที่เสมือผู้รักษาประตูที่จะป้องกับบั๊กที่ตรวจสอบได้ยากเหล่านี้ รวมถึงบั๊กที่เกิดจากการทำงานพร้อมกัน (Concurrency) โดยการทำงานร่วมกับคอมไพเลอร์ทำให้ทีมสามารถใช้เวลาไปกับการจดจ่อกับตรรกะของโปรแกรมแทนที่จะไล่ตามหาบั๊ก

Rust ยังนำเครื่องมือสำหรับนักพัฒนาที่ทันสมัยมาสู่โลกการเขียนโปรแกรมเชิงระบบ:

* Cargo, ประกอบด้วยตัวจัดการ dependency และเครื่องมือสำหรับ build, ช่วยให้ เพิ่ม,
  คอมไพล์และจัดการ dependencies ง่ายขึ้น และมีความสอดคล้องกันในระบบของ Rust
* Rustfmt ช่วยให้มั่นใจว่าสไตล์การเขียนโค้ดจะสอดคล้องกันสำหรับผู้พัฒนา
* The Rust Language Server ช่วยให้ Integrated Development Environment (IDE)
  สามารถใช้ code completion และ inline error messages.

By using these and other tools in the Rust ecosystem, developers can be
productive while writing systems-level code.

### นักเรียน/นักศึกษา

Rust เหมาะสำหรับนักเรียน/นักศึกษาที่สนใจเกี่ยวกับแนวคิดเกี่ยวกับระบบ (System) ในการใช้ Rust ก็มีหลายคนที่ได้เรียนรู้เกี่ยวกับการสร้างระบบปฏิบัติการ (Operating System) โดยชุมชนของ Rust ก็ยินดีที่จะตอบคำถามของนักเรียน/นักศึกษา ทีม Rust ต้องการที่จะให้แนวคิดเรื่องระบบสามารถเข้าถึงได้มากขึ้น โดยเฉพาะผู้เริ่มต้นเขียนโปรแกรมผ่านทางสิ่งต่างๆ เช่นหนังสือเล่มนี้

### บริษัท/องค์กร

มีบริษัทมากมายตั้งแต่เล็กไปจนถึงใหญ่ใช้ภาษา Rust ในการทำงานที่หลากหลาย ตั้งแต่ command line tools, web services, DevOps tooling,
อุปกรณ์ฝังตัว (embedded devices), การวิเคราห์เสียงและวีดีโอ and transcoding, สกุลเงินดิจิทัล,
bioinformatics, เครื่องมือค้นหา (Search Engine), อินเทอร์เน็ตในทุกสิ่ง (Internet of Things applications), การเรียนรู้ของเครื่อง (machine learning), รวมถึงส่วนหลักของเบราว์เซอร์ Firefox อีกด้วย

### นักพัฒนาโอเพ่นซอร์ส

Rust เหมาะสำหรับผู้ที่ต้องการมีส่วนร่วมในการพัฒนาภาษา Rust ให้ดียิ่งขึ้น, สร้างชุมชนของ Rust, สร้างเครื่องมือสำหรับนักพัฒนา และไลบรารีต่างๆ พวกเราจะดีใจมากถ้าคุณมีส่วนร่วมในภาษา Rust นี้

### ผู้ที่ต้องการความเร็วและความเสถียร 

Rust เหมาะสำหรับผู้ที่ต้องการความเร็วและความเสถียรในภาษา โดยความเร็วหมายถึงความเร็วของโปรแกรมที่สร้างด้วย Rust และความเร็วที่ใช้ในการเขียนโปรแกรม และสำหรับความเสถียรนั้น คอมไพเลอร์ Rust จะทำการตรวจสอบความเสถียรของโปรแกรมผ่านการเพิ่มฟีเจอร์และ refactoring โดยภาษาโปรแกรมมิ่งอื่นๆมักจะไม่มีการตรวจสอบสิ่งเหล่านี้ ทำให้นักพัฒนากลัวที่จะแก้ไขโค้ด Rust จึงมีความพยายามที่จะทำให้โปรแกรมมีทั้งความเร็วและเสถียรไปพร้อมๆกัน

ภาษา Rust หวังว่าจะสามารถสนับสนุนผู้ใช้อื่น ๆ อีกมากมายเช่นกัน และผู้ใช้ที่กล่าวถึงในที่นี้เป็นเพียงผู้ใช้ส่วนที่ใหญ่ที่สุดเท่านั้น นอกเหนือสิ่งอื่นใด Rust มีความทะเยอทะยานที่จะกำจัดการที่โปรแกรมเมอร์จำเป็นต้องเลือกอย่างใดอย่างหนึ่ง(เช่นความเร็ว, ความสะดวก)และยอมรับสิ่งนี้มานานนับศตวรรษ ด้วยการให้ทั้งความปลอดภัย *และ* ประสิทธิภาพ, ความรวดเร็ว *และ* ความสะดวก ลองใช้ Rust ดูสิและดูว่ามันเหมาะกับคุณหรือไม่

## หนังสือนี้เหมาะกับใคร

เราจะขอตั้งสมมติฐานว่าคุณนั้นเขียนโค้ดในภาษาโปรแกรมมิ่งอื่นอยู่แล้ว แต่เราก็ไม่ทราบว่าเป็นภาษาใด พวกเราสร้างเนื้อหาที่สามารถเข้าถึงได้จากผู้ที่มีพื้นฐานการเขียนโปรแกรมต่างๆให้มากที่สุด พวกเราจะไม่ยอมเสียเวลาในการพูดเกี่ยวกับวิธีการเขียนโปรแกรม ดังนั้นถ้าคุณยังเป็นผู้เริ่มต้นในการเขียนโปรแกรม มันจะดีกว่าถ้าคุณอ่านหนังสือที่ให้ข้อมูลเบื้องต้นเกี่ยวกับการเขียนโปรแกรมโดยเฉพาะ 

## จะใช้หนังสือนี้ยังไง

ตามปกติ คิดว่าผู้อ่านคงอ่านหนังสือเล่มนี้จากหน้าไปหลังอยู่แล้ว บทที่อยู่หลังจะอ้างอิงเนื้อหาจากบทก่อนหน้า
บทต่างๆอาจไม่ได้เจาะลึกลงไปในรายละเอียดของหัวข้อ ซึ่งเรามักจะกล่าวถึงเรื่องเดิมหัวข้อในบทต่อมา

คุณจะพบบทเรียนสองประเภทในหนังสือเล่มนี้ได้แก่ บทเรียนเกี่ยวกับเนื้อหา และบทเรียนที่เกี่ยวกับโปรเจกต์ ในบทเรียนที่เกี่ยวกับเนื้อหา คุณจะได้เรียนรู้เกี่ยวกับแง่มุมต่างๆ ของ Rust และบทเรียนที่เกี่ยวกับโปรเจกต์ คุณจะได้เรียนรู้วิธีการสร้างโปรแกรมขนาดเล็ก และประยุกต์สิ่งที่คุณได้เรียนรู้มา บทที่ 2, 12 และ 20 เป็นบทเรียนที่เกี่ยวกับโปรเจกต์ และที่เหลือคือบทเรียนเกี่ยวกับเนื้อหา

บทที่ 1 อธิบายวิธีการติดตั้ง Rust, การเขียนโปรแกรม “Hello, world!” และวิธีใช้ Cargo, ตัวจัดการแพ็คเกจของ Rust และเครื่องมือ build บทที่ 2 คือการแนะนำภาษา และอธิบายแนวคิดที่ระดับสูงขึ้น โดยจะอธิบายโดยละเอียดที่บทต่อมา โดยหากคุณต้องการเริ่มลงมือ บทที่ 2 ก็เหมาะสำหรับคุณแล้ว ในตอนเริ่มต้นคุณอาจจะข้ามไปอ่านที่บทที่ 3 เลยก็ได้ซึ่งจะอธิบายถึงฟีเจอร์ต่างๆ ของ Rust ที่คล้ายคลึงกับภาษาอื่นๆ และอ่านต่อที่บทที่ 4 ที่จะได้เรียนรู้เกี่ยวกับระบบความเป็นเจ้าของ (ownership)
อย่างไรก็ตามหากคุณเป็นผู้เรียนที่พิถีพิถันเป็นพิเศษและต้องการเรียนรู้ทุกรายละเอียดก่อนที่จะไปต่อ คุณอาจต้องการข้ามบทที่ 2 และไปยังบทที่ 3 แล้วกลับไปที่บทที่ 2 หากคุณต้องการทำโปรเจกต์และประยุกต์รายละเอียดที่ได้เรียนรู้มา

บทที่ 5 มาพูดคุยเกี่ยวกับสตรัก (structs) และเมธอด (methods) และบทที่ 6 อธิบายถึงอีนัม (enums), นิพจน์ `match` และคำสั่งเงื่อนไข `if let` และคุณจะได้ใช้สตรักและอีนัมเพื่อที่จะสร้างชนิดข้อมูล (type) ใน Rust อีกด้วย

ในบทที่ 7 คุณจะได้เรียนรู้เกี่ยวกับระบบโมดูล (module) ของ Rust และเกี่ยวกับกฏความเป็นส่วนตัวในการจัดการโค้ดและ public Application Programming Interface (API) บทที่ 8 กล่าวถึงคอลเลคชันพื้นฐานบางชนิดที่มีใน standard library เช่น เวกเตอร์ (vectors), สตริง (strings) และแฮชแมพ (hash maps) บทที่ 9 อธิบายแนวคิดและเทคนิคการทำ error-handling

บทที่ 10 ลงลึกไปกับ generics, traits และ lifetimes ซึ่งจะทำให้คุณสามารถสร้างโค้ดที่รับข้อมูลได้หลายชนิด บทที่ 11 เป็นบทที่เกี่ยวกับการทดสอบ (testing) ซึ่งจะเป็นการการันตีว่าโปรแกรมของคุณนั้้นสามารถทำงานได้อย่างถูกต้อง ในบทที่ 12 เราจะสร้าง implementation สับเซตของ functionality จาก `grep` command line tool ที่ใช้สำหรับหาข้อความที่อยู่ในไฟล์ โดยเราจะใช้ความรู้ต่างๆที่ได้อธิบายไว้ในบทก่อนหน้า

บทที่ 13 สำรวจเกี่ยวกับ closures และตัววนซ้ำ (iterators) ฟีเจอร์ของ Rust ที่มาจาก
การเขียนโปรแกรมเชิงฟังก์ชัน (functional programming languages) ในบทที่ 14 เราจะพูดถึง Cargo ให้ลึกขึ้น และพูดคุยเกี่ยวกัวิธีการที่ดีที่สุดในการแบ่งปันไลบรารีของคุณให้กับผู้อื่น
บทที่ 15 กล่าวถึงสมาร์ทพอยเตอร์ซึ่งเป็นไลบรารีพื้นฐานและ traits ที่ใช้งานการทำงานต่างๆ

ในบทที่ 16, เราจะอธิบายรูปแบบต่างๆของการเขียนโปรแกรมแบบทำงานพร้อมกัน (concurrent)
และพูดเกี่ยวกับวิธีการที่ Rust จะช่วยคุณในการทำงานแบบหลายเธรด (multiple threads)
บทที่ 17 มาดูลักษณะของ Rust เปรียบเทียบกับการแนวคิดเขียนโปรแกรมเชิงวัตถุที่คุณอาจจะคุ้นเคยมาก่อน

บทที่ 18 เป็นการอ้างอิงเกี่ยวกับ patterns และ pattern matching ซึ่งเป็นวิธีที่มีประสิทธิภาพในการแสดงไอเดียผ่านทางโปรแกรม Rust, บทที่ 19 ประกอบด้วยหัวข้อขั้นสูงที่น่าสนใจ รวมถึง unsafe, macros, และพูดเพิ่มเติมเกี่ยวกับ lifetimes, traits, types, functions และ closures

ในบทที่ 20 เราจะสร้างโปรเจกต์โดยนำ low-level multithreaded web server มาใช้กัน!

สุดท้ายนี้ภาคผนวกบางอันมีข้อมูลที่เป็นประโยชน์เกี่ยวกับภาษาในรูปแบบที่เป็นทางการมากขึ้น ภาคผนวก A เกี่ยวกับคีย์เวิร์ด Rust, ภาคผนวก B เกี่ยวกับตัวดำเนินการและสัญลักษณ์ใน Rust ภาคผนวก, C เกี่ยวกับ derivable traits จากไลบรารีมาตรฐาน, ภาคผนวก D เกี่ยวกับเครื่องมือการพัฒนา, ภาคผนวก E เกี่ยวกับ Rust รุ่นต่างๆ

ไม่มีวิธีการที่ผิดในการอ่านหนังสือเล่มนี้ ถ้าอยากจะข้ามบทก็ทำได้
คุณอาจต้องย้อนกลับไปที่บทก่อนหน้านี้หากคุณประสบปัญหาใด ๆที่ทำให้เกิดความสับสน ซึ่งมันก็ขึ้นอยู่กับคุณ

<span id="ferris"></span>

ส่วนที่สำคัญในการเรียนรู้ภาษา Rust คือการเรียนรู้ที่จะอ่านข้อความแสดงข้อผิดพลาดที่คอมไพล์เลอร์แสดง ซึ่งนี่จะทำให้คุณสามารถเขียนโค้ดที่ถูกต้องได้ ด้วยเหตุนี้ เราจึงให้ตัวอย่างที่ยังคอมไพล์ไม่ได้และข้อความแสดงข้อผิดพลาดที่คอมไพล์เลอร์จะแสดง โปรดทราบว่าหากคุณลองรันโค้ดตัวอย่างแบบสุ่ม มันก็อาจจะไม่สามารถคอมไพล์ได้! ตรวจสอบให้แน่ใจว่าคุณได้อ่านข้อความโดยรอบเพื่อดูว่าตัวอย่างที่คุณพยายามเรียกใช้นั้นเกิดจากข้อผิดพลาดหรือไม่ นอกจากนี้ เฟอร์ริสยังช่วยให้คุณจำแนกโค้ดที่ไม่ได้มีไว้เพื่อทำงานได้ 

| เฟอร์ริส                                                                | ความหมาย                                          |
|------------------------------------------------------------------------|--------------------------------------------------|
| <img src="img/ferris/does_not_compile.svg" class="ferris-explain"/>    | โค้ดนี้ไม่สามารถคอมไพล์ได้!                      |
| <img src="img/ferris/panics.svg" class="ferris-explain"/>              | โค้ดเกิดการพานิค (panics)!                                |
| <img src="img/ferris/unsafe.svg" class="ferris-explain"/>              | โค้ดนี้มีส่วนที่เป็น unsafe            |
| <img src="img/ferris/not_desired_behavior.svg" class="ferris-explain"/>| โค้ดนี้ไม่ได้ทำงานตามที่ต้องการ |

ในสถานการณ์ส่วนใหญ่ เราจะนำคุณไปยังเวออร์ชันที่ถูกต้องของโค้ดที่ยังไม่ได้คอมไพล์

## ซอร์สโค้ด

ไฟล์ต้นฉบับจากหนังสือนี้สามารถหาได้จาก
[GitHub][book].

[book]: https://github.com/rust-lang/book/tree/master/src
